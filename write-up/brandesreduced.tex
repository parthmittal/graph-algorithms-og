\subsection{The precomputation}
We compute for every pair of vertices in $u$ and $v$ in $G^r$ the
length of a shortest path between $u$ and $v$, hereon~$\delta_{G^r}(u, v)$,
and the number of of shortest paths between them, hereon~$\sigma_{G^r}(u, v)$.

Then, for every $u \in V(G^r)$, we compute an ordering of $V(G^r)$,
$S_{G^r}(u)$, where $\delta(u, v) \leq \delta(u, w)$ whenever
$v$ occurs before $w$ in $S_{G^r}(u)$.

A vigilant reader might notice that
\begin{align*}
\delta_{G^r} &= \delta_{G}\restriction_{G^r \times G^r}\\
\sigma_{G^r} &= \sigma_{G}\restriction_{G^r \times G^r}\\
\end{align*}
This is really very useful, and we will skip the proof.
